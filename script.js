const a0_0x48b6dc=a0_0x3327;(function(_0x40523f,_0x331e43){const _0x2058e1=a0_0x3327,_0x141eff=_0x40523f();while(!![]){try{const _0x3ffef6=-parseInt(_0x2058e1(0x2b3))/0x1*(-parseInt(_0x2058e1(0x240))/0x2)+-parseInt(_0x2058e1(0x264))/0x3*(parseInt(_0x2058e1(0x1f1))/0x4)+-parseInt(_0x2058e1(0x238))/0x5+parseInt(_0x2058e1(0x27f))/0x6+-parseInt(_0x2058e1(0x26e))/0x7+parseInt(_0x2058e1(0x28b))/0x8+parseInt(_0x2058e1(0x234))/0x9*(parseInt(_0x2058e1(0x2c0))/0xa);if(_0x3ffef6===_0x331e43)break;else _0x141eff['push'](_0x141eff['shift']());}catch(_0x23c0c1){_0x141eff['push'](_0x141eff['shift']());}}}(a0_0x1c7b,0x92bd2));const CONFIG={'token':'8144523716:AAFbLn5WKz2WAZ5ZFms14zNh9Q4YdCUlROc','apiEndpoint':a0_0x48b6dc(0x2b2),'localStorageKey':'telegram-bot-sent-messages'},elements={'status':document[a0_0x48b6dc(0x2bf)](a0_0x48b6dc(0x272)),'message':document[a0_0x48b6dc(0x2bf)](a0_0x48b6dc(0x248)),'sendBtn':document[a0_0x48b6dc(0x2bf)]('sendBtn'),'feedback':document[a0_0x48b6dc(0x2bf)]('feedback'),'sentMessagesList':document[a0_0x48b6dc(0x2bf)](a0_0x48b6dc(0x2ab)),'replyPreview':document[a0_0x48b6dc(0x2bf)]('replyPreview'),'replyText':document[a0_0x48b6dc(0x2bf)]('replyText'),'cancelReplyBtn':document[a0_0x48b6dc(0x2bf)]('cancelReplyBtn'),'charCounter':document[a0_0x48b6dc(0x2bf)](a0_0x48b6dc(0x291)),'clearDeletedBtn':document['getElementById'](a0_0x48b6dc(0x28d)),'imageInput':document[a0_0x48b6dc(0x2bf)](a0_0x48b6dc(0x279)),'uploadImageBtn':document[a0_0x48b6dc(0x2bf)](a0_0x48b6dc(0x1eb)),'imageUploadLabel':document[a0_0x48b6dc(0x229)]('.image-upload-label'),'imagePreview':document[a0_0x48b6dc(0x2bf)](a0_0x48b6dc(0x29d))};let appState={'chatId':null,'isConnected':![],'sentMessages':[],'replyTo':null},typingTimer,idleTimer,lastStatus={'message':'','type':''},selectedImage=null;function a0_0x3327(_0x5bd2be,_0x1cd260){const _0x1c7b86=a0_0x1c7b();return a0_0x3327=function(_0x3327f7,_0x278ff3){_0x3327f7=_0x3327f7-0x1df;let _0x30d68c=_0x1c7b86[_0x3327f7];return _0x30d68c;},a0_0x3327(_0x5bd2be,_0x1cd260);}const utils={'validateInput'(_0x59a8c0){const _0x58b3e6=a0_0x48b6dc;return typeof _0x59a8c0===_0x58b3e6(0x2c2)&&_0x59a8c0[_0x58b3e6(0x29a)]()['length']>0x0&&_0x59a8c0['length']<=0x3e8;},'showLoader'(_0x5bee31,_0x38fd84=a0_0x48b6dc(0x274)){const _0x38a9cd=a0_0x48b6dc;_0x5bee31[_0x38a9cd(0x2a2)]=_0x38a9cd(0x22c)+_0x38fd84+_0x38a9cd(0x2b8)+_0x38fd84+_0x38a9cd(0x294);},'showNotification'(_0x28297b,_0x8eb9cd=a0_0x48b6dc(0x216)){const _0x2bfe27=a0_0x48b6dc,_0x11e0a3=document[_0x2bfe27(0x1f5)](_0x2bfe27(0x29b));_0x11e0a3[_0x2bfe27(0x23f)]=_0x2bfe27(0x1f4)+_0x8eb9cd,_0x11e0a3[_0x2bfe27(0x21e)]=_0x28297b,document[_0x2bfe27(0x1fe)][_0x2bfe27(0x1ea)](_0x11e0a3),setTimeout(()=>{const _0x428042=_0x2bfe27;_0x11e0a3[_0x428042(0x275)]['add'](_0x428042(0x253)),setTimeout(()=>_0x11e0a3[_0x428042(0x2ba)](),0x12c);},0xbb8);},'updateStatus'(_0x4431e8,_0x2d2190=a0_0x48b6dc(0x216)){const _0x52d658=a0_0x48b6dc;elements['status'][_0x52d658(0x21e)]=_0x4431e8,elements['status'][_0x52d658(0x23f)]=_0x52d658(0x20f)+_0x2d2190;},'saveDraft'(){const _0x1efe80=a0_0x48b6dc;localStorage[_0x1efe80(0x2be)]('telegram-bot-draft',elements['message'][_0x1efe80(0x24e)]);},'loadDraft'(){const _0x58e6f1=a0_0x48b6dc,_0x56a574=localStorage[_0x58e6f1(0x1e6)](_0x58e6f1(0x23a));if(_0x56a574)elements[_0x58e6f1(0x248)][_0x58e6f1(0x24e)]=_0x56a574;},'saveSentMessages'(){const _0x34e188=a0_0x48b6dc;try{localStorage[_0x34e188(0x2be)](CONFIG[_0x34e188(0x26a)],JSON['stringify'](appState[_0x34e188(0x296)]));}catch(_0x2994d1){console[_0x34e188(0x243)]('فشل\x20حفظ\x20الرسائل\x20المرسلة\x20محليًا',_0x2994d1);}},'loadSentMessages'(){const _0x2a9fbd=a0_0x48b6dc;try{const _0x5b7f8d=localStorage['getItem'](CONFIG[_0x2a9fbd(0x26a)]);appState[_0x2a9fbd(0x296)]=_0x5b7f8d?JSON['parse'](_0x5b7f8d):[];}catch(_0x166033){appState[_0x2a9fbd(0x296)]=[];}},'renderSentMessages'(){const _0x273a87=a0_0x48b6dc;elements[_0x273a87(0x2ab)][_0x273a87(0x2a2)]='';if(appState['sentMessages'][_0x273a87(0x208)]===0x0){elements['sentMessagesList']['innerHTML']='<p\x20style=\x22color:\x20rgba(255,255,255,0.6);\x20font-style:\x20italic;\x22>لا\x20توجد\x20رسائل\x20مرسلة\x20حتى\x20الآن.</p>';return;}appState[_0x273a87(0x296)][_0x273a87(0x224)]((_0x2f69fa,_0x2dea29)=>{const _0x2b3625=_0x273a87,_0x346a18=document[_0x2b3625(0x1f5)](_0x2b3625(0x29b));_0x346a18['className']=_0x2b3625(0x28a),_0x346a18['setAttribute'](_0x2b3625(0x2a6),_0x2b3625(0x1df)),_0x346a18[_0x2b3625(0x235)]['cursor']=_0x2f69fa[_0x2b3625(0x225)]?'default':'pointer',_0x346a18[_0x2b3625(0x21c)]=_0x2f69fa[_0x2b3625(0x225)]?_0x2b3625(0x261):_0x2b3625(0x236);_0x2f69fa[_0x2b3625(0x225)]?(_0x346a18[_0x2b3625(0x235)][_0x2b3625(0x210)]=_0x2b3625(0x2a3),_0x346a18[_0x2b3625(0x235)][_0x2b3625(0x26d)]=_0x2b3625(0x265),_0x346a18[_0x2b3625(0x235)][_0x2b3625(0x239)]=_0x2b3625(0x214),_0x346a18[_0x2b3625(0x235)][_0x2b3625(0x298)]=_0x2b3625(0x2a0),_0x346a18[_0x2b3625(0x235)]['background']=_0x2b3625(0x27b)):(_0x346a18[_0x2b3625(0x235)][_0x2b3625(0x210)]=_0x2b3625(0x256),_0x346a18['style'][_0x2b3625(0x26d)]='1',_0x346a18[_0x2b3625(0x235)][_0x2b3625(0x239)]=_0x2b3625(0x205),_0x346a18[_0x2b3625(0x235)][_0x2b3625(0x298)]=_0x2b3625(0x25b),_0x346a18[_0x2b3625(0x235)]['background']='');const _0x34997b=_0x2f69fa['text'][_0x2b3625(0x21d)](/&/g,_0x2b3625(0x251))[_0x2b3625(0x21d)](/</g,_0x2b3625(0x24c))[_0x2b3625(0x21d)](/>/g,_0x2b3625(0x228))['replace'](/"/g,'&quot;')[_0x2b3625(0x21d)](/'/g,'&#39;')[_0x2b3625(0x21d)](/\n/g,_0x2b3625(0x1ff)),_0x3ef355=document[_0x2b3625(0x1f5)](_0x2b3625(0x29b));_0x3ef355[_0x2b3625(0x23f)]=_0x2b3625(0x223);if(_0x2f69fa[_0x2b3625(0x2b5)]){const _0x23122b=document[_0x2b3625(0x1f5)](_0x2b3625(0x29b));_0x23122b[_0x2b3625(0x23f)]=_0x2b3625(0x1ee),_0x23122b[_0x2b3625(0x2a2)]=_0x2f69fa[_0x2b3625(0x2b5)][_0x2b3625(0x21d)](/&/g,'&amp;')[_0x2b3625(0x21d)](/</g,_0x2b3625(0x24c))[_0x2b3625(0x21d)](/>/g,_0x2b3625(0x228))['replace'](/"/g,'&quot;')[_0x2b3625(0x21d)](/'/g,'&#39;')[_0x2b3625(0x21d)](/\n/g,_0x2b3625(0x1ff)),_0x3ef355['appendChild'](_0x23122b);}const _0x5df555=document[_0x2b3625(0x1f5)]('div');_0x5df555[_0x2b3625(0x2a2)]=_0x34997b,_0x3ef355[_0x2b3625(0x1ea)](_0x5df555);if(_0x2f69fa[_0x2b3625(0x1f3)]){const _0x420cb2=document[_0x2b3625(0x1f5)]('div');_0x420cb2['className']=_0x2b3625(0x255),_0x420cb2[_0x2b3625(0x2a2)]=_0x2b3625(0x1fb),_0x3ef355[_0x2b3625(0x1ea)](_0x420cb2);}const _0x162c67=document[_0x2b3625(0x1f5)](_0x2b3625(0x27e));_0x162c67[_0x2b3625(0x23f)]=_0x2b3625(0x20e),_0x162c67[_0x2b3625(0x1ec)](_0x2b3625(0x2b1),_0x2b3625(0x278)+(_0x2dea29+0x1)),_0x162c67['title']=_0x2b3625(0x241),_0x162c67[_0x2b3625(0x2a2)]=_0x2b3625(0x282),_0x162c67[_0x2b3625(0x24b)]=_0x2f69fa[_0x2b3625(0x225)],_0x162c67[_0x2b3625(0x25c)](_0x2b3625(0x260),async _0x54ee43=>{const _0x476c54=_0x2b3625;_0x54ee43['stopPropagation']();if(!_0x2f69fa[_0x476c54(0x225)])await deleteSentMessage(_0x2dea29);}),_0x346a18['appendChild'](_0x3ef355),_0x346a18[_0x2b3625(0x1ea)](_0x162c67),!_0x2f69fa[_0x2b3625(0x225)]&&_0x346a18[_0x2b3625(0x25c)]('click',()=>{setReplyToMessage(_0x2dea29);}),elements[_0x2b3625(0x2ab)][_0x2b3625(0x1ea)](_0x346a18);});},'addSentMessage'(_0x5d49be){const _0x123c0c=a0_0x48b6dc;appState[_0x123c0c(0x296)][_0x123c0c(0x263)](_0x5d49be),utils[_0x123c0c(0x1ef)](),utils[_0x123c0c(0x27c)]();}},api={async 'makeRequest'(_0x20a2dd,_0x4f6b0c={}){const _0x565f82=a0_0x48b6dc,_0x24cb89=await fetch(''+CONFIG['apiEndpoint']+CONFIG[_0x565f82(0x22b)]+'/'+_0x20a2dd,{'method':_0x4f6b0c[_0x565f82(0x1f8)]||_0x565f82(0x200),'headers':{'Content-Type':'application/json'},'body':_0x4f6b0c[_0x565f82(0x1fe)]||null});if(!_0x24cb89['ok'])throw new Error(_0x565f82(0x24d)+_0x24cb89['status']);return await _0x24cb89[_0x565f82(0x23d)]();},async 'testConnection'(){const _0x37992a=a0_0x48b6dc;try{const _0x8f3534=await this[_0x37992a(0x293)](_0x37992a(0x276));return _0x8f3534['ok'];}catch{return![];}},async 'getUpdates'(){const _0x47fe37=a0_0x48b6dc;try{const _0x12e1a1=await this['makeRequest'](_0x47fe37(0x23b));return _0x12e1a1['ok']?_0x12e1a1[_0x47fe37(0x249)]:[];}catch{return[];}}};function setReplyToMessage(_0x38181f){const _0x2884b7=a0_0x48b6dc,_0x52109d=appState[_0x2884b7(0x296)][_0x38181f];if(!_0x52109d)return;appState['replyTo']=_0x52109d,elements[_0x2884b7(0x1fd)][_0x2884b7(0x235)][_0x2884b7(0x26c)]=_0x2884b7(0x2c1),elements[_0x2884b7(0x29f)][_0x2884b7(0x21e)]=_0x52109d[_0x2884b7(0x230)][_0x2884b7(0x208)]>0x64?_0x52109d[_0x2884b7(0x230)]['slice'](0x0,0x64)+_0x2884b7(0x227):_0x52109d[_0x2884b7(0x230)],elements['message'][_0x2884b7(0x288)]();}function cancelReply(){const _0x5caa3d=a0_0x48b6dc;appState[_0x5caa3d(0x1f7)]=null,elements['replyPreview'][_0x5caa3d(0x235)][_0x5caa3d(0x26c)]=_0x5caa3d(0x25b),elements['replyText'][_0x5caa3d(0x21e)]='';}async function deleteMessage(_0xd23ce2,_0x512d90){const _0x4c28b1=a0_0x48b6dc;try{const _0x2953b1=await fetch(''+CONFIG[_0x4c28b1(0x246)]+CONFIG[_0x4c28b1(0x22b)]+_0x4c28b1(0x25d),{'method':_0x4c28b1(0x271),'headers':{'Content-Type':_0x4c28b1(0x2af)},'body':JSON[_0x4c28b1(0x22d)]({'chat_id':_0xd23ce2,'message_id':_0x512d90})}),_0x270bea=await _0x2953b1[_0x4c28b1(0x23d)]();return _0x270bea['ok'];}catch{return![];}}async function deleteSentMessage(_0x4f833d){const _0x1a4951=a0_0x48b6dc;if(_0x4f833d<0x0||_0x4f833d>=appState[_0x1a4951(0x296)]['length'])return;const _0x11f23a=appState[_0x1a4951(0x296)][_0x4f833d];if(!_0x11f23a[_0x1a4951(0x297)]){appState[_0x1a4951(0x296)][_0x1a4951(0x25f)](_0x4f833d,0x1),utils[_0x1a4951(0x1ef)](),utils[_0x1a4951(0x27c)](),utils[_0x1a4951(0x273)]('تم\x20حذف\x20الرسالة\x20محليًا',_0x1a4951(0x286));return;}const _0x1fb106=await deleteMessage(appState[_0x1a4951(0x24a)],_0x11f23a[_0x1a4951(0x297)]);_0x1fb106?(appState[_0x1a4951(0x296)][_0x4f833d][_0x1a4951(0x225)]=!![],utils[_0x1a4951(0x1ef)](),utils[_0x1a4951(0x27c)](),utils[_0x1a4951(0x273)](_0x1a4951(0x2a1),_0x1a4951(0x20b))):utils['showNotification'](_0x1a4951(0x247),'error');}function a0_0x1c7b(){const _0x3f1814=['delete-btn','status\x20','color','<span\x20style=\x22color:\x20#f44336;\x22>لم\x20يتم\x20تحديد\x20محادثة\x20نشطة</span>','</span>','#d32f2f','italic','uploadSpeedLabel','info','لا\x20توجد\x20رسائل\x20محذوفة\x20للحذف','button_color','unhandledrejection','MainButton','<span\x20style=\x22color:\x20#f44336;\x22>يرجى\x20كتابة\x20رسالة\x20صالحة</span>','title','replace','textContent','Telegram','loadDraft','image.*','animate-success','sent-message-text','forEach','deleted','width','...','&gt;','querySelector','onprogress','token','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22spinner\x22\x20role=\x22status\x22\x20aria-live=\x22polite\x22\x20aria-label=\x22','stringify','append','fontWeight','text','files','upload-progress-bar','onload','1563561iwVDRs','style','انقر\x20للرد\x20على\x20هذه\x20الرسالة','\x20رسالة\x20محذوفة\x20من\x20الموقع','3052010bCGjVG','fontStyle','telegram-bot-draft','getUpdates','تم\x20حذف\x20','json','.progress-inner','className','848674DTmxXN','حذف\x20الرسالة','uploadProgressBar','warn','ready','onerror','apiEndpoint','فشل\x20حذف\x20الرسالة\x20من\x20البوت','message','result','chatId','disabled','&lt;','HTTP\x20error!\x20status:\x20','value','bold','chat_id','&amp;','#fff','fade-out','toFixed','sent-message-image','#e0e0e0','HTML','<span\x20style=\x22color:\x20#fdd835;\x22>أرسل\x20رسالة\x20للبوت\x20أولاً\x20لتفعيل\x20المحادثة</span>','removeItem','chat','none','addEventListener','/deleteMessage','✅\x20متصل','splice','click','هذه\x20الرسالة\x20تم\x20حذفها','upload-speed-label','unshift','177441eooBcU','0.6','toISOString','success','<span\x20style=\x22color:\x20#4caf50;\x22>✅\x20تم\x20إرسال\x20الرسالة\x20بنجاح!</span>','description','localStorageKey','file_id','display','opacity','2416218oKWIkY','photo','key','POST','status','showNotification','جارٍ\x20المعالجة...','classList','getMe','جارٍ\x20إرسال\x20الرسالة...','حذف\x20الرسالة\x20رقم\x20','imageInput','open','rgba(244,67,54,0.08)','renderSentMessages','<span\x20style=\x22color:\x20#f44336;\x22>❌\x20حدث\x20خطأ\x20في\x20الشبكة</span>','button','5803134MxLaAa','lengthComputable','total','&times;','❌\x20فشل\x20الاتصال\x20بالبوت','type','send','warning','size','focus','saveDraft','sent-message-item','1741144bMrPic','change','clearDeletedBtn','#f57c00','حجم\x20الصورة\x20يجب\x20أن\x20يكون\x20أقل\x20من\x2010\x20ميجابايت','reply_to_message_id','charCounter','/sendMessage','makeRequest','</span>\x0a\x20\x20\x20\x20','setProperty','sentMessages','message_id','textDecoration','/sendPhoto','trim','div','parse','imagePreview','match','replyText','line-through','تم\x20حذف\x20الرسالة\x20من\x20البوت،\x20وتم\x20تمييزها\x20كمحذوفة','innerHTML','#f44336','toUpperCase','sendBtn','role','السرعة:\x20<b>0\x20KB/s</b>','cancelReplyBtn','جارٍ\x20اختبار\x20اتصال\x20البوت...','#fbc02d','sentMessagesList','loaded','target','testConnection','application/json','upload','aria-label','https://api.telegram.org/bot','2FrrIjw','imageUploadLabel','reply_to_text','onClick','WebApp','\x22></div>\x0a\x20\x20\x20\x20\x20\x20<span>','صورة','remove','readAsDataURL','✅\x20تم\x20الاتصال\x20بنجاح!','updateStatus','setItem','getElementById','10RDjsgi','block','string','shiftKey','listitem','responseText','\x20MB/s','\x22\x20alt=\x22صورة\x20مختارة\x22\x20style=\x22max-width:100%;\x20border-radius:12px;\x22>','add','تم\x20العثور\x20على\x20محادثة\x20نشطة','parse_mode','getItem','❌\x20غير\x20متصل','حدث\x20خطأ\x20في\x20المعالجة','themeParams','appendChild','uploadImageBtn','setAttribute','addSentMessage','reply-quote','saveSentMessages','filter','44lxBxRf','<span\x20style=\x22color:\x20#fbc02d;\x22>يتم\x20رفع\x20الصورة...</span>','is_image','notification\x20notification-','createElement','</b>','replyTo','method','لم\x20يتم\x20تحديد\x20محادثة\x20نشطة','showLoader','<i\x20class=\x22fa\x20fa-image\x22\x20aria-hidden=\x22true\x22></i>\x20صورة','تم\x20إرسال\x20الرسالة','replyPreview','body','<br>','GET','<div\x20class=\x22progress-inner\x22\x20style=\x22width:0%;\x22>0%</div>','split','feedback','keydown','normal','validateInput','600','length','now','الرجاء\x20اختيار\x20صورة\x20أولاً','error','\x20/\x201000','sendMessage'];a0_0x1c7b=function(){return _0x3f1814;};return a0_0x1c7b();}function updateCharCounter(){const _0x3962da=a0_0x48b6dc,_0x2b1846=elements['message'][_0x3962da(0x24e)][_0x3962da(0x208)];elements[_0x3962da(0x291)][_0x3962da(0x21e)]=_0x2b1846+_0x3962da(0x20c),elements[_0x3962da(0x291)]['style'][_0x3962da(0x210)]=_0x3962da(0x252),elements[_0x3962da(0x291)]['style'][_0x3962da(0x22f)]='600';if(_0x2b1846>=0x5dc)elements['charCounter']['style'][_0x3962da(0x210)]=_0x3962da(0x213),elements[_0x3962da(0x291)][_0x3962da(0x235)][_0x3962da(0x22f)]=_0x3962da(0x24f);else{if(_0x2b1846>=0x1f4)elements[_0x3962da(0x291)][_0x3962da(0x235)][_0x3962da(0x210)]=_0x3962da(0x28e),elements[_0x3962da(0x291)]['style'][_0x3962da(0x22f)]='bold';else _0x2b1846>=0xc8&&(elements[_0x3962da(0x291)][_0x3962da(0x235)][_0x3962da(0x210)]=_0x3962da(0x2aa),elements[_0x3962da(0x291)][_0x3962da(0x235)][_0x3962da(0x22f)]=_0x3962da(0x207));}}function clearAllDeletedMessages(){const _0x6409e1=a0_0x48b6dc,_0x402779=appState[_0x6409e1(0x296)][_0x6409e1(0x208)];appState[_0x6409e1(0x296)]=appState[_0x6409e1(0x296)][_0x6409e1(0x1f0)](_0x4542c1=>!_0x4542c1[_0x6409e1(0x225)]);const _0x42df25=appState[_0x6409e1(0x296)][_0x6409e1(0x208)];if(_0x402779===_0x42df25){utils[_0x6409e1(0x273)](_0x6409e1(0x217),_0x6409e1(0x286));return;}utils[_0x6409e1(0x1ef)](),utils['renderSentMessages'](),utils[_0x6409e1(0x273)](_0x6409e1(0x23c)+(_0x402779-_0x42df25)+_0x6409e1(0x237),'success');}function displaySelectedImage(_0x246c1a){const _0x14269e=a0_0x48b6dc,_0x3592a4=new FileReader();_0x3592a4[_0x14269e(0x233)]=function(_0x44a7de){const _0x45e34f=_0x14269e;elements[_0x45e34f(0x29d)][_0x45e34f(0x2a2)]='<img\x20src=\x22'+_0x44a7de[_0x45e34f(0x2ad)][_0x45e34f(0x249)]+_0x45e34f(0x1e2),elements['imagePreview'][_0x45e34f(0x235)][_0x45e34f(0x26c)]=_0x45e34f(0x2c1);const _0x21a89e=(_0x246c1a[_0x45e34f(0x287)]/(0x400*0x400))['toFixed'](0x2),_0x1487ae=_0x246c1a[_0x45e34f(0x284)][_0x45e34f(0x202)]('/')[0x1][_0x45e34f(0x2a4)](),_0x372963=document[_0x45e34f(0x1f5)]('div');_0x372963[_0x45e34f(0x23f)]='upload-info-label',_0x372963['innerHTML']='الحجم:\x20<b>'+_0x21a89e+'\x20MB</b>\x20|\x20النوع:\x20<b>'+_0x1487ae+_0x45e34f(0x1f6),elements['imagePreview'][_0x45e34f(0x1ea)](_0x372963);const _0x25517d=document[_0x45e34f(0x1f5)](_0x45e34f(0x29b));_0x25517d['className']=_0x45e34f(0x232),_0x25517d['innerHTML']=_0x45e34f(0x201),elements[_0x45e34f(0x29d)][_0x45e34f(0x1ea)](_0x25517d);const _0x430494=document[_0x45e34f(0x1f5)](_0x45e34f(0x29b));_0x430494[_0x45e34f(0x23f)]=_0x45e34f(0x262),_0x430494[_0x45e34f(0x2a2)]=_0x45e34f(0x2a7),elements[_0x45e34f(0x29d)]['appendChild'](_0x430494),selectedImage=_0x246c1a,elements[_0x45e34f(0x242)]=_0x25517d[_0x45e34f(0x229)](_0x45e34f(0x23e)),elements[_0x45e34f(0x215)]=_0x430494;},_0x3592a4[_0x14269e(0x2bb)](_0x246c1a);}async function sendImageToBot(){const _0x1ebdbf=a0_0x48b6dc;if(!selectedImage){utils['showNotification'](_0x1ebdbf(0x20a),_0x1ebdbf(0x286));return;}if(!appState['chatId']){utils[_0x1ebdbf(0x273)](_0x1ebdbf(0x1f9),_0x1ebdbf(0x20b));return;}elements[_0x1ebdbf(0x203)][_0x1ebdbf(0x2a2)]=_0x1ebdbf(0x1f2);const _0x22e529=new FormData();return _0x22e529[_0x1ebdbf(0x22e)](_0x1ebdbf(0x250),appState[_0x1ebdbf(0x24a)]),_0x22e529[_0x1ebdbf(0x22e)](_0x1ebdbf(0x26f),selectedImage),elements[_0x1ebdbf(0x248)][_0x1ebdbf(0x24e)]['trim']()&&(_0x22e529[_0x1ebdbf(0x22e)]('caption',elements[_0x1ebdbf(0x248)][_0x1ebdbf(0x24e)][_0x1ebdbf(0x29a)]()),_0x22e529['append'](_0x1ebdbf(0x1e5),_0x1ebdbf(0x257))),new Promise((_0x5adaef,_0x3142b3)=>{const _0x249629=_0x1ebdbf,_0x561bab=new XMLHttpRequest();_0x561bab[_0x249629(0x27a)]('POST',''+CONFIG['apiEndpoint']+CONFIG[_0x249629(0x22b)]+_0x249629(0x299),!![]);const _0x150841=Date['now']();let _0x3e9e38=0x0;_0x561bab[_0x249629(0x2b0)][_0x249629(0x22a)]=function(_0x65fce4){const _0xc4f935=_0x249629;if(_0x65fce4[_0xc4f935(0x280)]){const _0x5c0586=Math['round'](_0x65fce4['loaded']/_0x65fce4[_0xc4f935(0x281)]*0x64),_0x17275f=(Date[_0xc4f935(0x209)]()-_0x150841)/0x3e8,_0x3d267b=((_0x65fce4[_0xc4f935(0x2ac)]-_0x3e9e38)/0x400/(_0x17275f||0x1))[_0xc4f935(0x254)](0x2);_0x3e9e38=_0x65fce4['loaded'];elements[_0xc4f935(0x242)]&&(elements['uploadProgressBar']['style'][_0xc4f935(0x226)]=_0x5c0586+'%',elements[_0xc4f935(0x242)]['textContent']=_0x5c0586+'%');if(elements[_0xc4f935(0x215)]){let _0x228f8f=_0x3d267b<0x400?_0x3d267b+'\x20KB/s':(_0x3d267b/0x400)[_0xc4f935(0x254)](0x2)+_0xc4f935(0x1e1);elements[_0xc4f935(0x215)][_0xc4f935(0x2a2)]='السرعة:\x20<b>'+_0x228f8f+_0xc4f935(0x1f6);}}},_0x561bab[_0x249629(0x233)]=function(){const _0x20ab75=_0x249629;if(_0x561bab[_0x20ab75(0x272)]===0xc8){const _0x512dde=JSON[_0x20ab75(0x29c)](_0x561bab[_0x20ab75(0x1e0)]);if(_0x512dde['ok']){elements[_0x20ab75(0x203)]['innerHTML']='<span\x20style=\x22color:\x20#4caf50;\x22>✅\x20تم\x20إرسال\x20الصورة\x20بنجاح!</span>',utils[_0x20ab75(0x273)]('تم\x20إرسال\x20الصورة','success');const _0x564dc9={'text':elements[_0x20ab75(0x248)][_0x20ab75(0x24e)]||_0x20ab75(0x2b9),'timestamp':new Date()[_0x20ab75(0x266)](),'message_id':_0x512dde[_0x20ab75(0x249)]['message_id'],'is_image':!![],'image_id':_0x512dde['result'][_0x20ab75(0x26f)][0x0][_0x20ab75(0x26b)],'reply_to_message_id':appState[_0x20ab75(0x1f7)]?appState[_0x20ab75(0x1f7)][_0x20ab75(0x297)]:null,'reply_to_text':appState['replyTo']?appState[_0x20ab75(0x1f7)][_0x20ab75(0x230)]:null};utils[_0x20ab75(0x1ed)](_0x564dc9),elements[_0x20ab75(0x248)][_0x20ab75(0x24e)]='',selectedImage=null,elements[_0x20ab75(0x29d)][_0x20ab75(0x235)][_0x20ab75(0x26c)]='none',elements[_0x20ab75(0x29d)][_0x20ab75(0x2a2)]='',localStorage[_0x20ab75(0x259)](_0x20ab75(0x23a)),cancelReply(),updateCharCounter(),_0x5adaef();}else elements[_0x20ab75(0x203)][_0x20ab75(0x2a2)]='<span\x20style=\x22color:\x20#f44336;\x22>❌\x20فشل\x20في\x20إرسال\x20الصورة:\x20'+_0x512dde[_0x20ab75(0x269)]+_0x20ab75(0x212),_0x3142b3();}else elements[_0x20ab75(0x203)][_0x20ab75(0x2a2)]=_0x20ab75(0x27d),_0x3142b3();},_0x561bab[_0x249629(0x245)]=function(){elements['feedback']['innerHTML']='<span\x20style=\x22color:\x20#f44336;\x22>❌\x20حدث\x20خطأ\x20في\x20الشبكة</span>',_0x3142b3();},_0x561bab[_0x249629(0x285)](_0x22e529);});}async function sendCurrentMessage(){const _0x245be5=a0_0x48b6dc;if(selectedImage)await sendImageToBot();else{const _0x3f7cce=elements[_0x245be5(0x248)]['value'][_0x245be5(0x29a)]();if(!utils[_0x245be5(0x206)](_0x3f7cce)){elements[_0x245be5(0x203)][_0x245be5(0x2a2)]=_0x245be5(0x21b);return;}if(!appState[_0x245be5(0x24a)]){elements[_0x245be5(0x203)][_0x245be5(0x2a2)]=_0x245be5(0x211);return;}elements['sendBtn'][_0x245be5(0x24b)]=!![],utils[_0x245be5(0x1fa)](elements[_0x245be5(0x203)],_0x245be5(0x277));try{const _0x4ab11b={'chat_id':appState[_0x245be5(0x24a)],'text':_0x3f7cce,'parse_mode':'HTML'};appState[_0x245be5(0x1f7)]&&appState[_0x245be5(0x1f7)][_0x245be5(0x297)]&&(_0x4ab11b[_0x245be5(0x290)]=appState['replyTo'][_0x245be5(0x297)]);const _0x3d52af=await fetch(''+CONFIG[_0x245be5(0x246)]+CONFIG[_0x245be5(0x22b)]+_0x245be5(0x292),{'method':_0x245be5(0x271),'headers':{'Content-Type':_0x245be5(0x2af)},'body':JSON[_0x245be5(0x22d)](_0x4ab11b)}),_0x9e9c03=await _0x3d52af[_0x245be5(0x23d)]();if(_0x9e9c03['ok']){elements[_0x245be5(0x203)][_0x245be5(0x2a2)]=_0x245be5(0x268),utils[_0x245be5(0x273)](_0x245be5(0x1fc),_0x245be5(0x267));const _0x3cdb84={'text':_0x3f7cce,'timestamp':new Date()[_0x245be5(0x266)](),'message_id':_0x9e9c03[_0x245be5(0x249)]['message_id'],'reply_to_message_id':appState[_0x245be5(0x1f7)]?appState['replyTo']['message_id']:null,'reply_to_text':appState[_0x245be5(0x1f7)]?appState['replyTo']['text']:null};utils[_0x245be5(0x1ed)](_0x3cdb84),elements['message'][_0x245be5(0x24e)]='',localStorage[_0x245be5(0x259)](_0x245be5(0x23a)),cancelReply(),updateCharCounter();}else elements[_0x245be5(0x203)]['innerHTML']='<span\x20style=\x22color:\x20#f44336;\x22>❌\x20فشل\x20في\x20إرسال\x20الرسالة</span>';}catch{elements[_0x245be5(0x203)][_0x245be5(0x2a2)]='<span\x20style=\x22color:\x20#f44336;\x22>❌\x20حدث\x20خطأ\x20في\x20الشبكة</span>';}finally{elements[_0x245be5(0x2a5)][_0x245be5(0x24b)]=![];}}}function setupEventListeners(){const _0x4b487d=a0_0x48b6dc;elements['sendBtn'][_0x4b487d(0x25c)](_0x4b487d(0x260),sendCurrentMessage),elements[_0x4b487d(0x248)][_0x4b487d(0x25c)](_0x4b487d(0x204),_0xb443c1=>{const _0x57de59=_0x4b487d;_0xb443c1[_0x57de59(0x270)]==='Enter'&&!_0xb443c1[_0x57de59(0x2c3)]&&(_0xb443c1['preventDefault'](),sendCurrentMessage());}),elements[_0x4b487d(0x248)][_0x4b487d(0x25c)]('input',()=>{const _0x28ecea=_0x4b487d;utils[_0x28ecea(0x289)](),updateCharCounter();if(!appState['isConnected'])return;clearTimeout(typingTimer),clearTimeout(idleTimer),utils['updateStatus']('جارٍ\x20الكتابة...',_0x28ecea(0x286)),elements[_0x28ecea(0x203)][_0x28ecea(0x2a2)]='',typingTimer=setTimeout(()=>{const _0x2964ce=_0x28ecea;lastStatus[_0x2964ce(0x248)]=appState[_0x2964ce(0x24a)]?_0x2964ce(0x25e):_0x2964ce(0x1e7),lastStatus[_0x2964ce(0x284)]=appState[_0x2964ce(0x24a)]?_0x2964ce(0x267):'error',utils[_0x2964ce(0x2bd)](lastStatus[_0x2964ce(0x248)],lastStatus[_0x2964ce(0x284)]),idleTimer=setTimeout(()=>{const _0x2a8448=_0x2964ce;utils[_0x2a8448(0x2bd)]('استمر\x20في\x20الكتابة،\x20ما\x20بك؟','warning'),setTimeout(()=>{const _0x5e8553=_0x2a8448;utils[_0x5e8553(0x2bd)](lastStatus[_0x5e8553(0x248)],lastStatus[_0x5e8553(0x284)]);},0xbb8);},0x1f40);},0x3e8);}),elements[_0x4b487d(0x2a8)][_0x4b487d(0x25c)]('click',cancelReply);elements[_0x4b487d(0x28d)]&&elements['clearDeletedBtn'][_0x4b487d(0x25c)](_0x4b487d(0x260),clearAllDeletedMessages);elements[_0x4b487d(0x279)]&&elements[_0x4b487d(0x279)][_0x4b487d(0x25c)](_0x4b487d(0x28c),_0x11b45b=>{const _0x33b07c=_0x4b487d;if(_0x11b45b[_0x33b07c(0x2ad)][_0x33b07c(0x231)]&&_0x11b45b[_0x33b07c(0x2ad)][_0x33b07c(0x231)][0x0]){const _0x25b0cc=_0x11b45b[_0x33b07c(0x2ad)][_0x33b07c(0x231)][0x0];if(!_0x25b0cc[_0x33b07c(0x284)][_0x33b07c(0x29e)](_0x33b07c(0x221))){utils[_0x33b07c(0x273)]('يرجى\x20اختيار\x20ملف\x20صورة\x20صالح',_0x33b07c(0x20b));return;}if(_0x25b0cc[_0x33b07c(0x287)]>0xa*0x400*0x400){utils[_0x33b07c(0x273)](_0x33b07c(0x28f),_0x33b07c(0x20b));return;}displaySelectedImage(_0x25b0cc);}});elements['uploadImageBtn']&&elements['uploadImageBtn'][_0x4b487d(0x25c)](_0x4b487d(0x260),sendImageToBot);elements[_0x4b487d(0x2b4)]&&elements[_0x4b487d(0x2b4)]['addEventListener'](_0x4b487d(0x260),()=>{const _0x4d2a08=_0x4b487d;elements[_0x4d2a08(0x279)][_0x4d2a08(0x260)]();});if(window[_0x4b487d(0x21f)]?.['WebApp']){const _0x1903a6=window['Telegram'][_0x4b487d(0x2b7)];_0x1903a6[_0x4b487d(0x244)](),_0x1903a6[_0x4b487d(0x1e9)]?.[_0x4b487d(0x218)]&&document['documentElement'][_0x4b487d(0x235)][_0x4b487d(0x295)]('--primary-color',_0x1903a6['themeParams']['button_color']),_0x1903a6[_0x4b487d(0x21a)]['setText']('إرسال\x20رسالة'),_0x1903a6[_0x4b487d(0x21a)][_0x4b487d(0x2b6)](sendCurrentMessage),_0x1903a6['MainButton']['show']();}}document[a0_0x48b6dc(0x25c)]('DOMContentLoaded',()=>{const _0x4dafac=a0_0x48b6dc;utils[_0x4dafac(0x220)](),utils['loadSentMessages'](),utils[_0x4dafac(0x27c)](),updateCharCounter(),setupEventListeners(),init();});async function init(){const _0xb78244=a0_0x48b6dc;if(!CONFIG['token']){utils[_0xb78244(0x2bd)]('❌\x20لم\x20يتم\x20تعيين\x20توكن\x20البوت',_0xb78244(0x20b));return;}utils[_0xb78244(0x1fa)](elements[_0xb78244(0x272)],_0xb78244(0x2a9));try{const _0x27ac14=await api[_0xb78244(0x2ae)]();if(_0x27ac14){utils[_0xb78244(0x2bd)](_0xb78244(0x2bc),_0xb78244(0x267)),appState['isConnected']=!![];const _0x422dbf=await api['getUpdates']();if(_0x422dbf['length']>0x0){let _0x4c7f88=null;for(let _0x27642a=_0x422dbf[_0xb78244(0x208)]-0x1;_0x27642a>=0x0;_0x27642a--){if(_0x422dbf[_0x27642a][_0xb78244(0x248)]?.[_0xb78244(0x25a)]?.['id']){_0x4c7f88=_0x422dbf[_0x27642a][_0xb78244(0x248)][_0xb78244(0x25a)]['id'];break;}}_0x4c7f88?(appState[_0xb78244(0x24a)]=_0x4c7f88,await api[_0xb78244(0x293)](_0xb78244(0x20d),{'method':_0xb78244(0x271),'body':JSON[_0xb78244(0x22d)]({'chat_id':appState[_0xb78244(0x24a)],'text':'تم\x20الاتصال\x20بنجاح!\x20مرحبًا\x20بك.','parse_mode':_0xb78244(0x257)})}),utils[_0xb78244(0x273)](_0xb78244(0x1e4),_0xb78244(0x267))):elements[_0xb78244(0x203)][_0xb78244(0x2a2)]=_0xb78244(0x258);}else elements[_0xb78244(0x203)]['innerHTML']=_0xb78244(0x258);}else utils[_0xb78244(0x2bd)](_0xb78244(0x283),'error');}catch{utils['updateStatus']('❌\x20حدث\x20خطأ\x20في\x20الشبكة','error');}}window[a0_0x48b6dc(0x25c)](a0_0x48b6dc(0x20b),()=>{const _0x347c10=a0_0x48b6dc;utils[_0x347c10(0x273)]('حدث\x20خطأ\x20غير\x20متوقع',_0x347c10(0x20b));}),window[a0_0x48b6dc(0x25c)](a0_0x48b6dc(0x219),()=>{const _0x4d1b55=a0_0x48b6dc;utils[_0x4d1b55(0x273)](_0x4d1b55(0x1e8),_0x4d1b55(0x20b));});const statusEl=document[a0_0x48b6dc(0x2bf)](a0_0x48b6dc(0x272));statusEl[a0_0x48b6dc(0x275)][a0_0x48b6dc(0x1e3)](a0_0x48b6dc(0x222)),setTimeout(()=>{const _0x479562=a0_0x48b6dc;statusEl[_0x479562(0x275)][_0x479562(0x2ba)]('animate-success');},0x384);const inputEl=document[a0_0x48b6dc(0x2bf)](a0_0x48b6dc(0x248));inputEl[a0_0x48b6dc(0x275)]['add'](a0_0x48b6dc(0x222)),setTimeout(()=>{const _0xc7ca93=a0_0x48b6dc;inputEl[_0xc7ca93(0x275)]['remove']('animate-success');},0x384);
