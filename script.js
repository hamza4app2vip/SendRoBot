const a0_0xfa84e9=a0_0x5c36;(function(_0x5ee59f,_0x1ed93e){const _0xcff7ec=a0_0x5c36,_0xe1f1c3=_0x5ee59f();while(!![]){try{const _0x36ef45=parseInt(_0xcff7ec(0x29e))/0x1+-parseInt(_0xcff7ec(0x298))/0x2*(parseInt(_0xcff7ec(0x281))/0x3)+-parseInt(_0xcff7ec(0x2ae))/0x4+-parseInt(_0xcff7ec(0x1eb))/0x5*(parseInt(_0xcff7ec(0x286))/0x6)+parseInt(_0xcff7ec(0x2b1))/0x7*(-parseInt(_0xcff7ec(0x2bd))/0x8)+parseInt(_0xcff7ec(0x211))/0x9+parseInt(_0xcff7ec(0x248))/0xa*(parseInt(_0xcff7ec(0x239))/0xb);if(_0x36ef45===_0x1ed93e)break;else _0xe1f1c3['push'](_0xe1f1c3['shift']());}catch(_0x2de331){_0xe1f1c3['push'](_0xe1f1c3['shift']());}}}(a0_0x1b82,0x94040));const CONFIG={'token':a0_0xfa84e9(0x23a),'apiEndpoint':a0_0xfa84e9(0x287),'localStorageKey':a0_0xfa84e9(0x252)},elements={'status':document[a0_0xfa84e9(0x23c)]('status'),'message':document[a0_0xfa84e9(0x23c)](a0_0xfa84e9(0x2cb)),'sendBtn':document[a0_0xfa84e9(0x23c)](a0_0xfa84e9(0x27f)),'feedback':document[a0_0xfa84e9(0x23c)](a0_0xfa84e9(0x212)),'sentMessagesList':document[a0_0xfa84e9(0x23c)](a0_0xfa84e9(0x25e)),'replyPreview':document[a0_0xfa84e9(0x23c)](a0_0xfa84e9(0x249)),'replyText':document['getElementById'](a0_0xfa84e9(0x29c)),'cancelReplyBtn':document[a0_0xfa84e9(0x23c)]('cancelReplyBtn'),'charCounter':document[a0_0xfa84e9(0x23c)](a0_0xfa84e9(0x205)),'clearDeletedBtn':document[a0_0xfa84e9(0x23c)]('clearDeletedBtn'),'imageInput':document[a0_0xfa84e9(0x23c)](a0_0xfa84e9(0x227)),'uploadImageBtn':document[a0_0xfa84e9(0x23c)](a0_0xfa84e9(0x1de)),'imageUploadLabel':document['querySelector']('.image-upload-label'),'imagePreview':document['getElementById'](a0_0xfa84e9(0x210))};let appState={'chatId':null,'isConnected':![],'sentMessages':[],'replyTo':null},typingTimer,idleTimer,lastStatus={'message':'','type':''},selectedImage=null;const utils={'validateInput'(_0x7a0b15){const _0x22ef68=a0_0xfa84e9;return typeof _0x7a0b15===_0x22ef68(0x2b2)&&_0x7a0b15[_0x22ef68(0x23e)]()[_0x22ef68(0x2bf)]>0x0&&_0x7a0b15[_0x22ef68(0x2bf)]<=0x3e8;},'showLoader'(_0x3633c0,_0x3d5a4f=a0_0xfa84e9(0x1e2)){const _0x34bbca=a0_0xfa84e9;_0x3633c0['innerHTML']=_0x34bbca(0x26e)+_0x3d5a4f+'\x22></div>\x0a\x20\x20\x20\x20\x20\x20<span>'+_0x3d5a4f+'</span>\x0a\x20\x20\x20\x20';},'showNotification'(_0x417d6d,_0x328992='info'){const _0x46408d=a0_0xfa84e9,_0x97fc39=document[_0x46408d(0x2a3)]('div');_0x97fc39[_0x46408d(0x21a)]=_0x46408d(0x222)+_0x328992,_0x97fc39[_0x46408d(0x20e)]=_0x417d6d,document['body'][_0x46408d(0x243)](_0x97fc39),setTimeout(()=>{const _0x3ff103=_0x46408d;_0x97fc39[_0x3ff103(0x1ee)][_0x3ff103(0x1ef)](_0x3ff103(0x283)),setTimeout(()=>_0x97fc39[_0x3ff103(0x288)](),0x12c);},0xbb8);},'updateStatus'(_0x47a6fd,_0x18d464=a0_0xfa84e9(0x216)){const _0x440e9a=a0_0xfa84e9;elements[_0x440e9a(0x23d)][_0x440e9a(0x20e)]=_0x47a6fd,elements['status'][_0x440e9a(0x21a)]='status\x20'+_0x18d464;},'saveDraft'(){const _0x5cc57a=a0_0xfa84e9;localStorage[_0x5cc57a(0x26d)](_0x5cc57a(0x27b),elements[_0x5cc57a(0x2cb)][_0x5cc57a(0x213)]);},'loadDraft'(){const _0x3dabfb=a0_0xfa84e9,_0xd0ef51=localStorage[_0x3dabfb(0x1e1)]('telegram-bot-draft');if(_0xd0ef51)elements['message']['value']=_0xd0ef51;},'saveSentMessages'(){const _0x6d0b9c=a0_0xfa84e9;try{localStorage[_0x6d0b9c(0x26d)](CONFIG[_0x6d0b9c(0x2a1)],JSON['stringify'](appState[_0x6d0b9c(0x285)]));}catch(_0x12c943){console['warn']('فشل\x20حفظ\x20الرسائل\x20المرسلة\x20محليًا',_0x12c943);}},'loadSentMessages'(){const _0x5270d9=a0_0xfa84e9;try{const _0x1e2893=localStorage[_0x5270d9(0x1e1)](CONFIG[_0x5270d9(0x2a1)]);appState[_0x5270d9(0x285)]=_0x1e2893?JSON[_0x5270d9(0x2a0)](_0x1e2893):[];}catch(_0x3d8c0a){appState['sentMessages']=[];}},'renderSentMessages'(){const _0x4afa84=a0_0xfa84e9;elements[_0x4afa84(0x25e)][_0x4afa84(0x295)]='';if(appState[_0x4afa84(0x285)]['length']===0x0){elements['sentMessagesList']['innerHTML']=_0x4afa84(0x224);return;}appState[_0x4afa84(0x285)][_0x4afa84(0x28d)]((_0x3cd4e6,_0x270ddd)=>{const _0x5eb920=_0x4afa84,_0x3d5f7e=document[_0x5eb920(0x2a3)](_0x5eb920(0x251));_0x3d5f7e[_0x5eb920(0x21a)]=_0x5eb920(0x2a4),_0x3d5f7e[_0x5eb920(0x1fc)](_0x5eb920(0x2c3),_0x5eb920(0x2c8)),_0x3d5f7e[_0x5eb920(0x27a)]['cursor']=_0x3cd4e6['deleted']?_0x5eb920(0x276):'pointer',_0x3d5f7e['title']=_0x3cd4e6[_0x5eb920(0x292)]?_0x5eb920(0x20d):_0x5eb920(0x2be);_0x3cd4e6[_0x5eb920(0x292)]?(_0x3d5f7e[_0x5eb920(0x27a)][_0x5eb920(0x272)]=_0x5eb920(0x264),_0x3d5f7e['style'][_0x5eb920(0x20b)]=_0x5eb920(0x22e),_0x3d5f7e['style'][_0x5eb920(0x275)]=_0x5eb920(0x240),_0x3d5f7e['style']['textDecoration']=_0x5eb920(0x215),_0x3d5f7e['style'][_0x5eb920(0x277)]='rgba(244,67,54,0.08)'):(_0x3d5f7e[_0x5eb920(0x27a)]['color']=_0x5eb920(0x2a7),_0x3d5f7e[_0x5eb920(0x27a)]['opacity']='1',_0x3d5f7e[_0x5eb920(0x27a)]['fontStyle']='normal',_0x3d5f7e[_0x5eb920(0x27a)][_0x5eb920(0x220)]='none',_0x3d5f7e[_0x5eb920(0x27a)][_0x5eb920(0x277)]='');const _0xbb7e54=_0x3cd4e6[_0x5eb920(0x253)][_0x5eb920(0x217)](/&/g,_0x5eb920(0x25b))[_0x5eb920(0x217)](/</g,_0x5eb920(0x2c4))[_0x5eb920(0x217)](/>/g,_0x5eb920(0x223))[_0x5eb920(0x217)](/"/g,_0x5eb920(0x2c9))[_0x5eb920(0x217)](/'/g,'&#39;')[_0x5eb920(0x217)](/\n/g,_0x5eb920(0x29f)),_0xe90c82=document[_0x5eb920(0x2a3)](_0x5eb920(0x251));_0xe90c82['className']=_0x5eb920(0x296);if(_0x3cd4e6[_0x5eb920(0x2ba)]){const _0x225790=document[_0x5eb920(0x2a3)]('div');_0x225790['className']=_0x5eb920(0x200),_0x225790[_0x5eb920(0x295)]=_0x3cd4e6[_0x5eb920(0x2ba)][_0x5eb920(0x217)](/&/g,_0x5eb920(0x25b))['replace'](/</g,'&lt;')[_0x5eb920(0x217)](/>/g,_0x5eb920(0x223))[_0x5eb920(0x217)](/"/g,'&quot;')[_0x5eb920(0x217)](/'/g,'&#39;')[_0x5eb920(0x217)](/\n/g,_0x5eb920(0x29f)),_0xe90c82[_0x5eb920(0x243)](_0x225790);}const _0x512df1=document[_0x5eb920(0x2a3)](_0x5eb920(0x251));_0x512df1[_0x5eb920(0x295)]=_0xbb7e54,_0xe90c82['appendChild'](_0x512df1);if(_0x3cd4e6[_0x5eb920(0x22d)]){const _0x4e503a=document[_0x5eb920(0x2a3)](_0x5eb920(0x251));_0x4e503a[_0x5eb920(0x21a)]='sent-message-image',_0x4e503a[_0x5eb920(0x295)]='<i\x20class=\x22fa\x20fa-image\x22\x20aria-hidden=\x22true\x22></i>\x20صورة',_0xe90c82[_0x5eb920(0x243)](_0x4e503a);}const _0x551673=document[_0x5eb920(0x2a3)](_0x5eb920(0x230));_0x551673[_0x5eb920(0x21a)]=_0x5eb920(0x1ec),_0x551673[_0x5eb920(0x1fc)](_0x5eb920(0x1f0),'حذف\x20الرسالة\x20رقم\x20'+(_0x270ddd+0x1)),_0x551673[_0x5eb920(0x263)]=_0x5eb920(0x284),_0x551673[_0x5eb920(0x295)]=_0x5eb920(0x1f6),_0x551673[_0x5eb920(0x207)]=_0x3cd4e6['deleted'],_0x551673[_0x5eb920(0x2a8)](_0x5eb920(0x1e3),async _0x46308a=>{const _0x53b2a2=_0x5eb920;_0x46308a[_0x53b2a2(0x214)]();if(!_0x3cd4e6[_0x53b2a2(0x292)])await deleteSentMessage(_0x270ddd);}),_0x3d5f7e[_0x5eb920(0x243)](_0xe90c82),_0x3d5f7e['appendChild'](_0x551673),!_0x3cd4e6[_0x5eb920(0x292)]&&_0x3d5f7e['addEventListener'](_0x5eb920(0x1e3),()=>{setReplyToMessage(_0x270ddd);}),elements['sentMessagesList']['appendChild'](_0x3d5f7e);});},'addSentMessage'(_0x4eba59){const _0x46fbd4=a0_0xfa84e9;appState[_0x46fbd4(0x285)][_0x46fbd4(0x1e0)](_0x4eba59),utils[_0x46fbd4(0x254)](),utils[_0x46fbd4(0x28e)]();}},api={async 'makeRequest'(_0x594bb7,_0x13ca7d={}){const _0x3c1f13=a0_0xfa84e9,_0x1df8a2=await fetch(''+CONFIG[_0x3c1f13(0x24e)]+CONFIG[_0x3c1f13(0x2c7)]+'/'+_0x594bb7,{'method':_0x13ca7d[_0x3c1f13(0x255)]||'GET','headers':{'Content-Type':_0x3c1f13(0x256)},'body':_0x13ca7d[_0x3c1f13(0x270)]||null});if(!_0x1df8a2['ok'])throw new Error('HTTP\x20error!\x20status:\x20'+_0x1df8a2[_0x3c1f13(0x23d)]);return await _0x1df8a2[_0x3c1f13(0x246)]();},async 'testConnection'(){const _0x2b42f8=a0_0xfa84e9;try{const _0x365c79=await this[_0x2b42f8(0x23f)]('getMe');return _0x365c79['ok'];}catch{return![];}},async 'getUpdates'(){const _0x53c4e0=a0_0xfa84e9;try{const _0x109026=await this[_0x53c4e0(0x23f)](_0x53c4e0(0x229));return _0x109026['ok']?_0x109026['result']:[];}catch{return[];}}};function setReplyToMessage(_0x24fd75){const _0x23ce79=a0_0xfa84e9,_0x42306e=appState[_0x23ce79(0x285)][_0x24fd75];if(!_0x42306e)return;appState[_0x23ce79(0x2b3)]=_0x42306e,elements[_0x23ce79(0x249)][_0x23ce79(0x27a)][_0x23ce79(0x20c)]='block',elements[_0x23ce79(0x29c)][_0x23ce79(0x20e)]=_0x42306e[_0x23ce79(0x253)][_0x23ce79(0x2bf)]>0x64?_0x42306e[_0x23ce79(0x253)]['slice'](0x0,0x64)+_0x23ce79(0x271):_0x42306e['text'],elements[_0x23ce79(0x2cb)][_0x23ce79(0x2aa)]();}function cancelReply(){const _0x49c1d0=a0_0xfa84e9;appState['replyTo']=null,elements[_0x49c1d0(0x249)]['style'][_0x49c1d0(0x20c)]=_0x49c1d0(0x225),elements[_0x49c1d0(0x29c)][_0x49c1d0(0x20e)]='';}async function deleteMessage(_0x17960c,_0x1a8dcb){const _0x5c9230=a0_0xfa84e9;try{const _0x1c14a7=await fetch(''+CONFIG['apiEndpoint']+CONFIG[_0x5c9230(0x2c7)]+_0x5c9230(0x231),{'method':_0x5c9230(0x267),'headers':{'Content-Type':_0x5c9230(0x256)},'body':JSON[_0x5c9230(0x2bc)]({'chat_id':_0x17960c,'message_id':_0x1a8dcb})}),_0x4bc6ed=await _0x1c14a7['json']();return _0x4bc6ed['ok'];}catch{return![];}}async function deleteSentMessage(_0x53e48f){const _0x52032e=a0_0xfa84e9;if(_0x53e48f<0x0||_0x53e48f>=appState[_0x52032e(0x285)][_0x52032e(0x2bf)])return;const _0x3a8b77=appState[_0x52032e(0x285)][_0x53e48f];if(!_0x3a8b77[_0x52032e(0x247)]){appState[_0x52032e(0x285)][_0x52032e(0x289)](_0x53e48f,0x1),utils['saveSentMessages'](),utils['renderSentMessages'](),utils[_0x52032e(0x273)](_0x52032e(0x26c),_0x52032e(0x242));return;}const _0x8415f4=await deleteMessage(appState[_0x52032e(0x234)],_0x3a8b77[_0x52032e(0x247)]);_0x8415f4?(appState['sentMessages'][_0x53e48f][_0x52032e(0x292)]=!![],utils[_0x52032e(0x254)](),utils['renderSentMessages'](),utils[_0x52032e(0x273)]('تم\x20حذف\x20الرسالة\x20من\x20البوت،\x20وتم\x20تمييزها\x20كمحذوفة',_0x52032e(0x2c6))):utils['showNotification'](_0x52032e(0x258),'error');}function updateCharCounter(){const _0x396387=a0_0xfa84e9,_0x2bb1c8=elements[_0x396387(0x2cb)][_0x396387(0x213)]['length'];elements['charCounter'][_0x396387(0x20e)]=_0x2bb1c8+_0x396387(0x293),elements[_0x396387(0x205)][_0x396387(0x27a)]['color']=_0x396387(0x262),elements[_0x396387(0x205)][_0x396387(0x27a)]['fontWeight']=_0x396387(0x2ac);if(_0x2bb1c8>=0x5dc)elements['charCounter'][_0x396387(0x27a)][_0x396387(0x272)]=_0x396387(0x257),elements['charCounter'][_0x396387(0x27a)]['fontWeight']=_0x396387(0x280);else{if(_0x2bb1c8>=0x1f4)elements['charCounter'][_0x396387(0x27a)][_0x396387(0x272)]=_0x396387(0x2c1),elements[_0x396387(0x205)][_0x396387(0x27a)][_0x396387(0x291)]='bold';else _0x2bb1c8>=0xc8&&(elements['charCounter'][_0x396387(0x27a)][_0x396387(0x272)]=_0x396387(0x1ea),elements['charCounter'][_0x396387(0x27a)]['fontWeight']=_0x396387(0x2ac));}}function clearAllDeletedMessages(){const _0x22438b=a0_0xfa84e9,_0x114f57=appState['sentMessages'][_0x22438b(0x2bf)];appState[_0x22438b(0x285)]=appState[_0x22438b(0x285)][_0x22438b(0x1df)](_0x36a554=>!_0x36a554[_0x22438b(0x292)]);const _0x5a1aa6=appState[_0x22438b(0x285)][_0x22438b(0x2bf)];if(_0x114f57===_0x5a1aa6){utils[_0x22438b(0x273)](_0x22438b(0x268),_0x22438b(0x242));return;}utils[_0x22438b(0x254)](),utils[_0x22438b(0x28e)](),utils[_0x22438b(0x273)](_0x22438b(0x208)+(_0x114f57-_0x5a1aa6)+_0x22438b(0x236),_0x22438b(0x2c0));}function displaySelectedImage(_0x52133a){const _0x257277=a0_0xfa84e9,_0x381b7d=new FileReader();_0x381b7d[_0x257277(0x2b7)]=function(_0x5ebd39){const _0x5d4fc2=_0x257277;elements[_0x5d4fc2(0x210)][_0x5d4fc2(0x295)]=_0x5d4fc2(0x244)+_0x5ebd39[_0x5d4fc2(0x25a)]['result']+_0x5d4fc2(0x1fd),elements[_0x5d4fc2(0x210)]['style'][_0x5d4fc2(0x20c)]=_0x5d4fc2(0x22a);const _0x13b2f3=(_0x52133a['size']/(0x400*0x400))['toFixed'](0x2),_0x4590a5=_0x52133a[_0x5d4fc2(0x25d)]['split']('/')[0x1]['toUpperCase'](),_0x25844d=document['createElement'](_0x5d4fc2(0x251));_0x25844d[_0x5d4fc2(0x21a)]=_0x5d4fc2(0x2b9),_0x25844d[_0x5d4fc2(0x295)]=_0x5d4fc2(0x221)+_0x13b2f3+_0x5d4fc2(0x259)+_0x4590a5+_0x5d4fc2(0x265),elements[_0x5d4fc2(0x210)]['appendChild'](_0x25844d);const _0x34dc8c=document[_0x5d4fc2(0x2a3)]('div');_0x34dc8c[_0x5d4fc2(0x21a)]=_0x5d4fc2(0x23b),_0x34dc8c[_0x5d4fc2(0x295)]=_0x5d4fc2(0x1f8),elements[_0x5d4fc2(0x210)][_0x5d4fc2(0x243)](_0x34dc8c);const _0x49bc39=document[_0x5d4fc2(0x2a3)](_0x5d4fc2(0x251));_0x49bc39[_0x5d4fc2(0x21a)]=_0x5d4fc2(0x203),_0x49bc39[_0x5d4fc2(0x295)]=_0x5d4fc2(0x24b),elements[_0x5d4fc2(0x210)][_0x5d4fc2(0x243)](_0x49bc39),selectedImage=_0x52133a,elements[_0x5d4fc2(0x282)]=_0x34dc8c[_0x5d4fc2(0x24c)](_0x5d4fc2(0x1e6)),elements['uploadSpeedLabel']=_0x49bc39;},_0x381b7d[_0x257277(0x297)](_0x52133a);}async function sendImageToBot(){const _0x390a57=a0_0xfa84e9;if(!selectedImage){utils[_0x390a57(0x273)](_0x390a57(0x2ca),'warning');return;}if(!appState[_0x390a57(0x234)]){utils[_0x390a57(0x273)](_0x390a57(0x25c),_0x390a57(0x2c6));return;}elements[_0x390a57(0x212)][_0x390a57(0x295)]=_0x390a57(0x1fe);const _0x18f045=new FormData();return _0x18f045['append']('chat_id',appState[_0x390a57(0x234)]),_0x18f045[_0x390a57(0x294)](_0x390a57(0x28a),selectedImage),elements['message'][_0x390a57(0x213)][_0x390a57(0x23e)]()&&(_0x18f045[_0x390a57(0x294)]('caption',elements['message']['value'][_0x390a57(0x23e)]()),_0x18f045[_0x390a57(0x294)](_0x390a57(0x26a),_0x390a57(0x22b))),new Promise((_0x17a118,_0x45b13e)=>{const _0xe02d14=_0x390a57,_0x3030d6=new XMLHttpRequest();_0x3030d6[_0xe02d14(0x245)](_0xe02d14(0x267),''+CONFIG[_0xe02d14(0x24e)]+CONFIG['token']+_0xe02d14(0x29b),!![]);const _0x85c028=Date['now']();let _0xc4eaf3=0x0;_0x3030d6['upload']['onprogress']=function(_0xa322fb){const _0x1fe808=_0xe02d14;if(_0xa322fb[_0x1fe808(0x1e9)]){const _0x985d3c=Math[_0x1fe808(0x20f)](_0xa322fb[_0x1fe808(0x24a)]/_0xa322fb[_0x1fe808(0x20a)]*0x64),_0x4dcd0d=(Date[_0x1fe808(0x29a)]()-_0x85c028)/0x3e8,_0x2866b4=((_0xa322fb[_0x1fe808(0x24a)]-_0xc4eaf3)/0x400/(_0x4dcd0d||0x1))[_0x1fe808(0x206)](0x2);_0xc4eaf3=_0xa322fb['loaded'];elements['uploadProgressBar']&&(elements[_0x1fe808(0x282)][_0x1fe808(0x27a)]['width']=_0x985d3c+'%',elements['uploadProgressBar']['textContent']=_0x985d3c+'%');if(elements[_0x1fe808(0x237)]){let _0xd88d8c=_0x2866b4<0x400?_0x2866b4+_0x1fe808(0x269):(_0x2866b4/0x400)[_0x1fe808(0x206)](0x2)+_0x1fe808(0x290);elements[_0x1fe808(0x237)][_0x1fe808(0x295)]=_0x1fe808(0x218)+_0xd88d8c+_0x1fe808(0x265);}}},_0x3030d6[_0xe02d14(0x2b7)]=function(){const _0x24a3e8=_0xe02d14;if(_0x3030d6[_0x24a3e8(0x23d)]===0xc8){const _0x2ad61b=JSON[_0x24a3e8(0x2a0)](_0x3030d6[_0x24a3e8(0x2af)]);if(_0x2ad61b['ok']){elements[_0x24a3e8(0x212)][_0x24a3e8(0x295)]=_0x24a3e8(0x21f),utils[_0x24a3e8(0x273)](_0x24a3e8(0x1e5),_0x24a3e8(0x2c0));const _0x144f8c={'text':elements[_0x24a3e8(0x2cb)][_0x24a3e8(0x213)]||_0x24a3e8(0x25f),'timestamp':new Date()[_0x24a3e8(0x2b5)](),'message_id':_0x2ad61b['result'][_0x24a3e8(0x247)],'is_image':!![],'image_id':_0x2ad61b[_0x24a3e8(0x299)][_0x24a3e8(0x28a)][0x0][_0x24a3e8(0x1ff)],'reply_to_message_id':appState['replyTo']?appState['replyTo'][_0x24a3e8(0x247)]:null,'reply_to_text':appState[_0x24a3e8(0x2b3)]?appState['replyTo']['text']:null};utils[_0x24a3e8(0x1f7)](_0x144f8c),elements[_0x24a3e8(0x2cb)]['value']='',selectedImage=null,elements[_0x24a3e8(0x210)][_0x24a3e8(0x27a)][_0x24a3e8(0x20c)]=_0x24a3e8(0x225),elements[_0x24a3e8(0x210)][_0x24a3e8(0x295)]='',localStorage['removeItem'](_0x24a3e8(0x27b)),cancelReply(),updateCharCounter(),_0x17a118();}else elements['feedback'][_0x24a3e8(0x295)]=_0x24a3e8(0x1fb)+_0x2ad61b[_0x24a3e8(0x2b4)]+'</span>',_0x45b13e();}else elements[_0x24a3e8(0x212)][_0x24a3e8(0x295)]=_0x24a3e8(0x27e),_0x45b13e();},_0x3030d6[_0xe02d14(0x238)]=function(){const _0x558a26=_0xe02d14;elements[_0x558a26(0x212)][_0x558a26(0x295)]=_0x558a26(0x27e),_0x45b13e();},_0x3030d6[_0xe02d14(0x2b0)](_0x18f045);});}function a0_0x1b82(){const _0x181c1a=['تم\x20إرسال\x20الصورة','.progress-inner','--primary-color','themeParams','lengthComputable','#fbc02d','40uiHYCZ','delete-btn','WebApp','classList','add','aria-label','MainButton','❌\x20فشل\x20الاتصال\x20بالبوت','جارٍ\x20الكتابة...','clearDeletedBtn','✅\x20متصل','&times;','addSentMessage','<div\x20class=\x22progress-inner\x22\x20style=\x22width:0%;\x22>0%</div>','validateInput','Enter','<span\x20style=\x22color:\x20#f44336;\x22>❌\x20فشل\x20في\x20إرسال\x20الصورة:\x20','setAttribute','\x22\x20alt=\x22صورة\x20مختارة\x22\x20style=\x22max-width:100%;\x20border-radius:12px;\x22>','<span\x20style=\x22color:\x20#fbc02d;\x22>يتم\x20رفع\x20الصورة...</span>','file_id','reply-quote','setProperty','animate-success','upload-speed-label','✅\x20تم\x20الاتصال\x20بنجاح!','charCounter','toFixed','disabled','تم\x20حذف\x20','تم\x20إرسال\x20الرسالة','total','opacity','display','هذه\x20الرسالة\x20تم\x20حذفها','textContent','round','imagePreview','7395273UvcUVD','feedback','value','stopPropagation','line-through','info','replace','السرعة:\x20<b>','chat','className','cancelReplyBtn','❌\x20غير\x20متصل','DOMContentLoaded','<span\x20style=\x22color:\x20#f44336;\x22>لم\x20يتم\x20تحديد\x20محادثة\x20نشطة</span>','<span\x20style=\x22color:\x20#4caf50;\x22>✅\x20تم\x20إرسال\x20الصورة\x20بنجاح!</span>','textDecoration','الحجم:\x20<b>','notification\x20notification-','&gt;','<p\x20style=\x22color:\x20rgba(255,255,255,0.6);\x20font-style:\x20italic;\x22>لا\x20توجد\x20رسائل\x20مرسلة\x20حتى\x20الآن.</p>','none','ready','imageInput','size','getUpdates','block','HTML','setText','is_image','0.6','<span\x20style=\x22color:\x20#f44336;\x22>❌\x20فشل\x20في\x20إرسال\x20الرسالة</span>','button','/deleteMessage','change','استمر\x20في\x20الكتابة،\x20ما\x20بك؟','chatId','match','\x20رسالة\x20محذوفة\x20من\x20الموقع','uploadSpeedLabel','onerror','671gheDuO','7795433686:AAEEwtNG7GI6XuOwM0fVhEpShwENvfsLkf0','upload-progress-bar','getElementById','status','trim','makeRequest','italic','preventDefault','warning','appendChild','<img\x20src=\x22','open','json','message_id','244970kJNEBB','replyPreview','loaded','السرعة:\x20<b>0\x20KB/s</b>','querySelector','files','apiEndpoint','keydown','<span\x20style=\x22color:\x20#fdd835;\x22>أرسل\x20رسالة\x20للبوت\x20أولاً\x20لتفعيل\x20المحادثة</span>','div','telegram-bot-sent-messages','text','saveSentMessages','method','application/json','#d32f2f','فشل\x20حذف\x20الرسالة\x20من\x20البوت','\x20MB</b>\x20|\x20النوع:\x20<b>','target','&amp;','لم\x20يتم\x20تحديد\x20محادثة\x20نشطة','type','sentMessagesList','صورة','جارٍ\x20اختبار\x20اتصال\x20البوت...','testConnection','#fff','title','#f44336','</b>','يرجى\x20اختيار\x20ملف\x20صورة\x20صالح','POST','لا\x20توجد\x20رسائل\x20محذوفة\x20للحذف','\x20KB/s','parse_mode','reply_to_message_id','تم\x20حذف\x20الرسالة\x20محليًا','setItem','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22spinner\x22\x20role=\x22status\x22\x20aria-live=\x22polite\x22\x20aria-label=\x22','button_color','body','...','color','showNotification','جارٍ\x20إرسال\x20الرسالة...','fontStyle','default','background','<span\x20style=\x22color:\x20#4caf50;\x22>✅\x20تم\x20إرسال\x20الرسالة\x20بنجاح!</span>','imageUploadLabel','style','telegram-bot-draft','<span\x20style=\x22color:\x20#f44336;\x22>يرجى\x20كتابة\x20رسالة\x20صالحة</span>','إرسال\x20رسالة','<span\x20style=\x22color:\x20#f44336;\x22>❌\x20حدث\x20خطأ\x20في\x20الشبكة</span>','sendBtn','bold','3azeGas','uploadProgressBar','fade-out','حذف\x20الرسالة','sentMessages','131304dYupJP','https://api.telegram.org/bot','remove','splice','photo','onClick','documentElement','forEach','renderSentMessages','loadDraft','\x20MB/s','fontWeight','deleted','\x20/\x201000','append','innerHTML','sent-message-text','readAsDataURL','1532602ikicHD','result','now','/sendPhoto','replyText','input','566847BRayoO','<br>','parse','localStorageKey','❌\x20حدث\x20خطأ\x20في\x20الشبكة','createElement','sent-message-item','image.*','/sendMessage','#e0e0e0','addEventListener','showLoader','focus','حجم\x20الصورة\x20يجب\x20أن\x20يكون\x20أقل\x20من\x2010\x20ميجابايت','600','loadSentMessages','862076rVNzbw','responseText','send','7837879pTrmMb','string','replyTo','description','toISOString','updateStatus','onload','Telegram','upload-info-label','reply_to_text','تم\x20الاتصال\x20بنجاح!\x20مرحبًا\x20بك.','stringify','8yHnrFT','انقر\x20للرد\x20على\x20هذه\x20الرسالة','length','success','#f57c00','isConnected','role','&lt;','key','error','token','listitem','&quot;','الرجاء\x20اختيار\x20صورة\x20أولاً','message','uploadImageBtn','filter','unshift','getItem','جارٍ\x20المعالجة...','click','تم\x20العثور\x20على\x20محادثة\x20نشطة'];a0_0x1b82=function(){return _0x181c1a;};return a0_0x1b82();}async function sendCurrentMessage(){const _0x268ec5=a0_0xfa84e9;if(selectedImage)await sendImageToBot();else{const _0x57cc82=elements['message']['value'][_0x268ec5(0x23e)]();if(!utils[_0x268ec5(0x1f9)](_0x57cc82)){elements['feedback']['innerHTML']=_0x268ec5(0x27c);return;}if(!appState['chatId']){elements[_0x268ec5(0x212)]['innerHTML']=_0x268ec5(0x21e);return;}elements[_0x268ec5(0x27f)][_0x268ec5(0x207)]=!![],utils[_0x268ec5(0x2a9)](elements['feedback'],_0x268ec5(0x274));try{const _0x481f38={'chat_id':appState[_0x268ec5(0x234)],'text':_0x57cc82,'parse_mode':'HTML'};appState[_0x268ec5(0x2b3)]&&appState[_0x268ec5(0x2b3)][_0x268ec5(0x247)]&&(_0x481f38[_0x268ec5(0x26b)]=appState['replyTo']['message_id']);const _0x19da7=await fetch(''+CONFIG['apiEndpoint']+CONFIG[_0x268ec5(0x2c7)]+_0x268ec5(0x2a6),{'method':_0x268ec5(0x267),'headers':{'Content-Type':_0x268ec5(0x256)},'body':JSON[_0x268ec5(0x2bc)](_0x481f38)}),_0x3bcc66=await _0x19da7[_0x268ec5(0x246)]();if(_0x3bcc66['ok']){elements[_0x268ec5(0x212)][_0x268ec5(0x295)]=_0x268ec5(0x278),utils[_0x268ec5(0x273)](_0x268ec5(0x209),_0x268ec5(0x2c0));const _0x2134b2={'text':_0x57cc82,'timestamp':new Date()['toISOString'](),'message_id':_0x3bcc66[_0x268ec5(0x299)][_0x268ec5(0x247)],'reply_to_message_id':appState[_0x268ec5(0x2b3)]?appState[_0x268ec5(0x2b3)]['message_id']:null,'reply_to_text':appState[_0x268ec5(0x2b3)]?appState[_0x268ec5(0x2b3)]['text']:null};utils[_0x268ec5(0x1f7)](_0x2134b2),elements[_0x268ec5(0x2cb)][_0x268ec5(0x213)]='',localStorage['removeItem'](_0x268ec5(0x27b)),cancelReply(),updateCharCounter();}else elements[_0x268ec5(0x212)][_0x268ec5(0x295)]=_0x268ec5(0x22f);}catch{elements[_0x268ec5(0x212)]['innerHTML']=_0x268ec5(0x27e);}finally{elements[_0x268ec5(0x27f)][_0x268ec5(0x207)]=![];}}}function setupEventListeners(){const _0x1688ea=a0_0xfa84e9;elements[_0x1688ea(0x27f)]['addEventListener'](_0x1688ea(0x1e3),sendCurrentMessage),elements[_0x1688ea(0x2cb)][_0x1688ea(0x2a8)](_0x1688ea(0x24f),_0x70f298=>{const _0x3759b3=_0x1688ea;_0x70f298[_0x3759b3(0x2c5)]===_0x3759b3(0x1fa)&&!_0x70f298['shiftKey']&&(_0x70f298[_0x3759b3(0x241)](),sendCurrentMessage());}),elements['message'][_0x1688ea(0x2a8)](_0x1688ea(0x29d),()=>{const _0x321b3b=_0x1688ea;utils['saveDraft'](),updateCharCounter();if(!appState['isConnected'])return;clearTimeout(typingTimer),clearTimeout(idleTimer),utils[_0x321b3b(0x2b6)](_0x321b3b(0x1f3),_0x321b3b(0x242)),elements[_0x321b3b(0x212)][_0x321b3b(0x295)]='',typingTimer=setTimeout(()=>{const _0x162a76=_0x321b3b;lastStatus[_0x162a76(0x2cb)]=appState[_0x162a76(0x234)]?_0x162a76(0x1f5):_0x162a76(0x21c),lastStatus[_0x162a76(0x25d)]=appState[_0x162a76(0x234)]?'success':_0x162a76(0x2c6),utils[_0x162a76(0x2b6)](lastStatus[_0x162a76(0x2cb)],lastStatus[_0x162a76(0x25d)]),idleTimer=setTimeout(()=>{const _0x4af6de=_0x162a76;utils[_0x4af6de(0x2b6)](_0x4af6de(0x233),_0x4af6de(0x242)),setTimeout(()=>{const _0x477842=_0x4af6de;utils[_0x477842(0x2b6)](lastStatus['message'],lastStatus[_0x477842(0x25d)]);},0xbb8);},0x1f40);},0x3e8);}),elements[_0x1688ea(0x21b)][_0x1688ea(0x2a8)]('click',cancelReply);elements[_0x1688ea(0x1f4)]&&elements['clearDeletedBtn']['addEventListener'](_0x1688ea(0x1e3),clearAllDeletedMessages);elements['imageInput']&&elements[_0x1688ea(0x227)][_0x1688ea(0x2a8)](_0x1688ea(0x232),_0x1b4c1b=>{const _0x3845fd=_0x1688ea;if(_0x1b4c1b['target']['files']&&_0x1b4c1b[_0x3845fd(0x25a)][_0x3845fd(0x24d)][0x0]){const _0x5d2795=_0x1b4c1b[_0x3845fd(0x25a)][_0x3845fd(0x24d)][0x0];if(!_0x5d2795[_0x3845fd(0x25d)][_0x3845fd(0x235)](_0x3845fd(0x2a5))){utils[_0x3845fd(0x273)](_0x3845fd(0x266),'error');return;}if(_0x5d2795[_0x3845fd(0x228)]>0xa*0x400*0x400){utils['showNotification'](_0x3845fd(0x2ab),_0x3845fd(0x2c6));return;}displaySelectedImage(_0x5d2795);}});elements[_0x1688ea(0x1de)]&&elements['uploadImageBtn'][_0x1688ea(0x2a8)]('click',sendImageToBot);elements[_0x1688ea(0x279)]&&elements[_0x1688ea(0x279)][_0x1688ea(0x2a8)]('click',()=>{const _0x1dcfd8=_0x1688ea;elements[_0x1dcfd8(0x227)][_0x1dcfd8(0x1e3)]();});if(window[_0x1688ea(0x2b8)]?.[_0x1688ea(0x1ed)]){const _0x28992c=window['Telegram'][_0x1688ea(0x1ed)];_0x28992c[_0x1688ea(0x226)](),_0x28992c[_0x1688ea(0x1e8)]?.[_0x1688ea(0x26f)]&&document[_0x1688ea(0x28c)][_0x1688ea(0x27a)][_0x1688ea(0x201)](_0x1688ea(0x1e7),_0x28992c[_0x1688ea(0x1e8)][_0x1688ea(0x26f)]),_0x28992c[_0x1688ea(0x1f1)][_0x1688ea(0x22c)](_0x1688ea(0x27d)),_0x28992c[_0x1688ea(0x1f1)][_0x1688ea(0x28b)](sendCurrentMessage),_0x28992c[_0x1688ea(0x1f1)]['show']();}}document[a0_0xfa84e9(0x2a8)](a0_0xfa84e9(0x21d),()=>{const _0x8c3316=a0_0xfa84e9;utils[_0x8c3316(0x28f)](),utils[_0x8c3316(0x2ad)](),utils[_0x8c3316(0x28e)](),updateCharCounter(),setupEventListeners(),init();});async function init(){const _0x44ca11=a0_0xfa84e9;if(!CONFIG[_0x44ca11(0x2c7)]){utils[_0x44ca11(0x2b6)]('❌\x20لم\x20يتم\x20تعيين\x20توكن\x20البوت','error');return;}utils[_0x44ca11(0x2a9)](elements[_0x44ca11(0x23d)],_0x44ca11(0x260));try{const _0x302d01=await api[_0x44ca11(0x261)]();if(_0x302d01){utils[_0x44ca11(0x2b6)](_0x44ca11(0x204),_0x44ca11(0x2c0)),appState[_0x44ca11(0x2c2)]=!![];const _0x211e91=await api[_0x44ca11(0x229)]();if(_0x211e91[_0x44ca11(0x2bf)]>0x0){let _0x27f5de=null;for(let _0x40b7bb=_0x211e91[_0x44ca11(0x2bf)]-0x1;_0x40b7bb>=0x0;_0x40b7bb--){if(_0x211e91[_0x40b7bb][_0x44ca11(0x2cb)]?.[_0x44ca11(0x219)]?.['id']){_0x27f5de=_0x211e91[_0x40b7bb][_0x44ca11(0x2cb)][_0x44ca11(0x219)]['id'];break;}}_0x27f5de?(appState[_0x44ca11(0x234)]=_0x27f5de,await api[_0x44ca11(0x23f)]('sendMessage',{'method':_0x44ca11(0x267),'body':JSON['stringify']({'chat_id':appState[_0x44ca11(0x234)],'text':_0x44ca11(0x2bb),'parse_mode':'HTML'})}),utils[_0x44ca11(0x273)](_0x44ca11(0x1e4),_0x44ca11(0x2c0))):elements[_0x44ca11(0x212)][_0x44ca11(0x295)]='<span\x20style=\x22color:\x20#fdd835;\x22>أرسل\x20رسالة\x20للبوت\x20أولاً\x20لتفعيل\x20المحادثة</span>';}else elements['feedback']['innerHTML']=_0x44ca11(0x250);}else utils[_0x44ca11(0x2b6)](_0x44ca11(0x1f2),_0x44ca11(0x2c6));}catch{utils[_0x44ca11(0x2b6)](_0x44ca11(0x2a2),_0x44ca11(0x2c6));}}window[a0_0xfa84e9(0x2a8)](a0_0xfa84e9(0x2c6),()=>{const _0x30eefe=a0_0xfa84e9;utils['showNotification']('حدث\x20خطأ\x20غير\x20متوقع',_0x30eefe(0x2c6));}),window[a0_0xfa84e9(0x2a8)]('unhandledrejection',()=>{const _0x337ff0=a0_0xfa84e9;utils[_0x337ff0(0x273)]('حدث\x20خطأ\x20في\x20المعالجة',_0x337ff0(0x2c6));});const statusEl=document[a0_0xfa84e9(0x23c)]('status');statusEl[a0_0xfa84e9(0x1ee)][a0_0xfa84e9(0x1ef)](a0_0xfa84e9(0x202)),setTimeout(()=>{const _0x11d270=a0_0xfa84e9;statusEl['classList'][_0x11d270(0x288)]('animate-success');},0x384);function a0_0x5c36(_0x5e6f62,_0x1c9274){const _0x1b82d5=a0_0x1b82();return a0_0x5c36=function(_0x5c3619,_0x530ab9){_0x5c3619=_0x5c3619-0x1de;let _0x296a09=_0x1b82d5[_0x5c3619];return _0x296a09;},a0_0x5c36(_0x5e6f62,_0x1c9274);}const inputEl=document[a0_0xfa84e9(0x23c)]('message');inputEl[a0_0xfa84e9(0x1ee)][a0_0xfa84e9(0x1ef)](a0_0xfa84e9(0x202)),setTimeout(()=>{const _0x51f93b=a0_0xfa84e9;inputEl[_0x51f93b(0x1ee)][_0x51f93b(0x288)](_0x51f93b(0x202));},0x384);
